<!DOCTYPE html>
<html>
	<head>
		<title>FV Extender - Settings</title>
		<link rel="stylesheet" href="../css/settings.css">
		<script type="application/x-javascript" src="../js/jquery-1.7.min.js"></script>	
		<script type="application/x-javascript">
			var bgp = chrome.extension.getBackgroundPage();
		
			$(document).ready( function() {
				
				loadSettings( false )
			
				$("#defaults-btn").click( function( evt ) {
					loadSettings( true );
					evt.preventDefault();
				});
				
				$("#save-btn").click( function( evt ) {
					saveSettings();
					window.close();
					evt.preventDefault();
				});
				
				$("#cancel-btn").click( function( evt ) {
					window.close();
					evt.preventDefault();
				});			
			
			} );
			
			function loadSettings( loadDefaults ) {
				
				if ( loadDefaults ) {
					
					$("#user-settings .return-gift-text textarea").val(
						'This gift was returned by FV Extender for Google Chrome.'
					);
					
					$('#user-settings input:radio[name="sound"]').filter('[value="' + bgp.setting_defaults.audio_enabled + '"]').attr('checked', true);
					
				} else {
					$('#user-settings input:radio[name="sound"]').filter('[value="' + bgp.settings.audio_enabled + '"]').attr('checked', true);
					$("#user-settings .return-gift-text textarea").val( bgp.settings.returnGiftMessage );
				}	
			}
			
			function saveSettings() {
				
				bgp.settings.returnGiftMessage = $("#user-settings .return-gift-text textarea").val();
				bgp.settings.audio_enabled = $('input:radio[name="sound"]:checked').val();
				
				bgp.saveSettings();
				
				window.close();
			}
			
			
		</script>		
	</head>
	<body>
		<div id="user-settings" class="user-settings"><div class="position"><div class="layers">
			<div class="border"></div>
			<div class="content">
				<div class="header default"><h1>FV Extender - Settings</h1></div>
				<div class="form">
					<div class="field return-gift-text">
						<div class="label">Text for "Thank you" gift:</div>
						<div class="input"><textarea></textarea></div>
						<br clear="all" />
					</div>
					<div class="field sound">
						<div class="label">Sound:</div>
						<div class="input">
							<div class="option">
								<div class="mark"><input type="radio" name="sound" value="1" /></div>
								<div class="text"><b>Enabled</b></div>
								<br clear="all" />
							</div>
							<div class="option">
								<div class="mark"><input type="radio" name="sound" value="0" /></div>
								<div class="text"><b>Disabled</b>.</div>
								<br clear="all" />
							</div>						
						</div>
						<br clear="all" />
					</div>
					<div class="buttons">
						<a href="#" class="item button save" id="save-btn">Save</a>
						<a href="#" class="item button cancel" id="cancel-btn">Cancel</a>
						<a href="#" class="item button defaults" id="defaults-btn">Load defaults</a>
						<br clear="all" />
					</div>
				</div>				
			</div>			
		</div></div></div>		
	</body>
</html>