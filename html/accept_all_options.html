<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
	<head>
		<title>FV-Extender</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="../js/jquery.js"></script>
		<link href="../css/background.css" rel="stylesheet" type="text/css" />
		<script type="text/javascript">
			$(document).ready( function() {
				chrome.extension.sendRequest( { "action" : "get_option", "group": "accept_all", "option": "return-gift-msg" }, function( response ) {
					$('#return-gift-msg').val( response[ "value" ] );						
				} );	
			});			
			
			function start( accept_mode ) {
				chrome.extension.sendRequest( { 
					"action" : "set_accept_mode",
					"accept_mode" : accept_mode
				}, function() {
					chrome.extension.sendRequest( { 
						"action": "set_option",
						"group": "accept_all", 
						"option": "return-gift-msg",
						"value"	: $('#return-gift-msg').val()
					}, function() {
						document.location.replace( 'accept_all_status.html' );	
					} );	
				})
			}	
		</script>
	</head>
	<body>
		<div class="site">
			<h1>Accept requests - Options</h1>
			<div class="field wide">
				<div class="label">Message for when you return gifts:</div>
				<div class="input"><textarea id="return-gift-msg" rows="3"></textarea></div>	
			</div>
			<div class="field submit">
				<div class="buttons">
					<div class="button"><a href="#" onclick="start( 'ACCEPT' );return false" title="Accept requests(fast)">Accept</a></div>
					<div class="button"><a href="#" onclick="start( 'ACCEPT_AND_RETURN' );return false" title="Accept and return gifts(slow and experimental)">Accept & gift back</a></div>
				</div>
			</div>
		</div>
	</body>
</html>